<html>
	<head>
		<title>Contact Caster</title>
		<link rel="stylesheet" type="text/css" href="../css/cssreset-min.css"/>
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" type="text/css" href="../css/style.css"/>
		<script type="text/javascript" src="../js/jquery-1.7.2.min.js"></script>
		<script type="text/javascript" src="../js/knockout-2.1.0.js"></script>
		<script type="text/javascript">
			$(function() {
				function Contact(data) {
				    this.FirstName = ko.observable(data.FirstName);
				    this.LastName = ko.observable(data.LastName);
				    this.Emails = data.Emails;
				}

				function TaskListViewModel() {
				    // Data
				    var self = this;
				    self.contacts = ko.observableArray([]);
				    // Operations
				    self.addTask = function() {
				        self.contacts.push(new Task({ title: this.newTaskText() }));
				        self.newTaskText("");
				    };

				    self.removeTask = function(task) { self.contacts.remove(task) };

				    $.getJSON("contacts.json", function(allData) {
				        var mappedContacts = $.map(allData, function(item) { return item; });
				        self.contacts(mappedContacts);
				    }); 
				}

				ko.applyBindings(new TaskListViewModel());
			});
		</script>
	</head>
	<body>
		<div id="content">
			<h1>Contact Caster</h1>
			<h2>Your contacts</h2>
			<table>
			    <thead><tr>
			        <th>First name</th>
			        <th>Last name</th>
			    </tr></thead>
			    <!-- Todo: Generate table body -->
			    <tbody data-bind="foreach: contacts">
			        <tr>
			            <td data-bind="text: FirstName"></td>
			            <td data-bind="text: LastName"></td>
			            <td data-bind="foreach: Emails">
							<div>
								<span data-bind="text: Label"></span>: <span data-bind="text: Value"></span>
							</div>
			            </td>
			            <td data-bind="foreach: Phones">
							<div>
								<span data-bind="text: Label"></span>: <span data-bind="text: Value"></span>
							</div>
			            </td>
						<td data-bind="foreach: RelatedNames">
							<div>
								<span data-bind="text: Label"></span>: <span data-bind="text: Value"></span>
							</div>
			            </td>
						<td data-bind="foreach: Urls">
							<div>
								<span data-bind="text: Label"></span>: <span data-bind="text: Value"></span>
							</div>
			            </td>
			            <td data-bind="text: HasImage"></td>
			            <td data-bind="text: Image"></td>
			        </tr>
			    </tbody>
			</table>
		</div>
	</body>
</html>
